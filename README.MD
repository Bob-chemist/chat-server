1. Server start
   a. Получает список пользователей

2. Connection
    a. Сервер
        i. Подключает сокет
        ii. Передает список юзеров
        iii. Передает список непрочитанных сообщений
        iv. Передает список прочитанных сообщений глубиной 10 с каждого диалога
        v. отсылает всем сообщение, что подключился новый юзер
    b. Клиент
        i. background
            1) подключает сокет
            2) Отправляет id на сервер
            3) Получает список пользователей с сервера
            4) Получает список непрочитанных сообщений и выводит наклейку с их количеством на иконку и выводит notification list
            5) Получает список прочитанных сообщений, склеивает с непрочитанными

3. Work
    a. Сервер
        i. Вносит сообщения в БД
        ii. Обновляет статус last_seen пользователя
        iii. Получает запрос на старые сообщения и отправляет их на клиент (не реализовано)
    b. Клиент
        i. background
            1) При получении от popup сигнала hi отправляет запрос серверу на обновление last_seen, отправляет в popup списки пользователей и сообщений, обнуляет список непрочитанных
            2) Получает одиночные сообщения с сервера.
                a) Popup есть: отправляет в popup
                b) Popupa нет: добавляет в список непрочитанных, обновляет наклейку и выводит notification
            3) получает с сервера сообщения о подключении/отключении пользователей и 
                a) Popup есть: отправляет в popup
                b) Popupa нет: обновляет инфу в списке пользователей
            4) При отключении сокета обнуляет списки сообщений
            5) Получает запрос на старые сообщения от popup и перенаправляет на сервер (не реализовано)
            6) Получает старые сообщения (не реализовано)
                a) Popup есть: отправляет в popup
                b) Popupa нет: добавляет в список сообщений
        ii. Popup
            1) Отправляет на background сигнал hi
            2) Получает список юзеров, отрисовывает список пользователей и окна чатов
            3) Получает список сообщений и разносит по чатам
            4) Получает одиночные сообщения и добавляет в чаты
            5) отправляет одиночные сообщения
            6) получает сообщения о подключении/отключении пользователей
            7) Отправляет запрос на старые сообщения (не реализовано)

4. Disconnection
    a. Сервер
        i. отключает сокет
        ii. рассылает сообщение, что пользователь отключен
        iii. обновляет список connectedUsers
